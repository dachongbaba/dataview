(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8e3a8d06"],{"5c24":function(t,e,a){"use strict";(function(t){a("d81d"),a("a9e3"),a("d3b7"),a("ac1f"),a("1276");var n=a("81b0"),s=a.n(n),r=a("bc3a"),i=a.n(r),c=a("c1df"),f=a.n(c);function u(t,e,a){e.data=a,e.params.page=(null===this.page?e.pages.page:this.page)+e.pages.index,e.params.size=null===this.size?e.pages.size:this.size,i()(e).then((function(a){t.datas=s.a.get(a.data,e.paths.dataPath,[]);var n={};n.page=1*s.a.get(a.data,e.paths.pagePath,0)-e.pages.index,n.total=1*s.a.get(a.data,e.paths.totalPath,0),n.count=1*s.a.get(a.data,e.paths.countPath,0),n.size=1*s.a.get(a.data,e.paths.sizePath,20),n.length=t.datas.length,t.$emit("update:pages",n)})).catch((function(t){console.error(fetch,t)})).finally((function(){}))}e["a"]={name:"DataTable",props:{fields:{type:Array,default:function(){return[]}},fetchs:{type:Object,default:function(){return{}}},filters:{type:Object,default:function(){return{}}},pages:{type:Object,default:function(){return{}}},page:{type:Number,default:function(){return null}},size:{type:Number,default:function(){return null}}},data:function(){return{datas:this.fetchs.datas}},watch:{filters:{handler:function(){this.resetPage(),this.fetchData()},deep:!0},page:{handler:function(){this.fetchData()},deep:!0}},created:function(){var t=this;this.fields.map((function(e){if(e.format){var a=e.format.split("|"),n=t[a[0]];e.format=function(e){return a[0]=e,n.apply(t,a)}}})),this.fetchData()},computed:{jq:function(){return t},fetch:function(){return s.a.debounce(u,500)}},methods:{fetchData:function(){return this.fetch(this,this.fetchs,this.filters)},resetPage:function(){this.page=this.fetchs.pages.page||0,this.fetchData()},format:function(t,e){return e.format?e.format(t[e.data]):t[e.data]},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";if(t/=1,!t)return"";var a=new Date(t),n=f()(a).format(e);return n},formatStat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t/=1,e=JSON.parse(e),e[t]||t||"-"}}}}).call(this,a("c5ec"))},"8840d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.views&&t.views.columns&&t.views.fetchs?a("div",[t.views.title?a("h2",[t._v(t._s(t.datas.title))]):t._e(),t.views.desc?a("p",{staticClass:"text-muted"},[t._v(t._s(t.datas.desc))]):t._e(),a("data-filter",{attrs:{items:t.views.filters,filters:t.filters},on:{"update:filters":function(e){t.filters=e}}}),a("br"),a("data-table",{attrs:{fields:t.views.columns,fetchs:t.views.fetchs,filters:t.filters,pages:t.pages,page:t.page,size:t.size},on:{"update:pages":function(e){t.pages=e}}}),a("br"),a("data-page",{staticClass:"justify-content-center",attrs:{page:t.page,size:t.size,pages:t.pages},on:{"update:page":function(e){t.page=e},"update:size":function(e){t.size=e}}})],1):t._e()},s=[],r=(a("d81d"),a("96cf"),a("1da1")),i=a("81b0"),c=a.n(i),f=a("bc3a"),u=a.n(f),o=a("db49"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",{staticClass:"table-secondary"},t._l(t.fields,(function(e){return a("th",{key:e.data},[t._v(" "+t._s(e.title||e.data)+" ")])})),0)]),a("tbody",t._l(t.datas,(function(e,n){return a("tr",{key:n},t._l(t.fields,(function(n,s){return a("td",{key:s},[t._v(" "+t._s(t.format(e,n))+" ")])})),0)})),0)])])])},p=[],d=a("5c24"),g=d["a"],h=a("2877"),m=Object(h["a"])(g,l,p,!1,null,"bd10a000",null),b=m.exports,v=a("43c2"),y=a("2696"),w={name:"Tables",props:[],data:function(){return{config:{},views:{},filters:{},pages:{},page:null,size:null}},created:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,s,r,i,f,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t,!t.$route.query.config){e.next=16;break}return n={},e.prev=3,e.next=6,u.a.get(t.$route.query.config);case 6:n=e.sent,t.config=c.a.merge({},o["a"],n.data||{}),e.next=14;break;case 10:return e.prev=10,e.t0=e["catch"](3),alert("config "+t.$route.query.config+" load error\n"+e.t0.message+" "),e.abrupt("return");case 14:e.next=17;break;case 16:t.config=c.a.merge({},o["a"]);case 17:s=t.$route.query,r=JSON.parse(s.options||{}),i=JSON.parse(s.fetchs||{}),f=JSON.parse(s.columns||[]),l=JSON.parse(s.filters||[]),s.options=c.a.merge({},t.config.options,r),s.fetchs=c.a.merge({},t.config.fetchs,i),s.columns=c.a.map(f,(function(t,e){return"number"===typeof e?"string"===typeof t?a.config.columns[t]:t:c.a.merge({},a.config.columns[e],t)})),s.filters=c.a.map(l,(function(t,e){return"number"===typeof e?"string"===typeof t?a.config.filters[t]:t:c.a.merge({},a.config.filters[e],t)})),t.views=c.a.merge({view:"",title:"",desc:"",fetchs:"{}",columns:"[]",filters:"[]",options:"{}"},s);case 27:case"end":return e.stop()}}),e,null,[[3,10]])})))()},components:{DataTable:b,DataFilter:v["a"],DataPage:y["a"]}},_=w,z=Object(h["a"])(_,n,s,!1,null,"1438a856",null);e["default"]=z.exports}}]);
//# sourceMappingURL=chunk-8e3a8d06.0dad0d662f.js.map