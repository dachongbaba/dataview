(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78f4156a"],{"489e":function(t,e,a){"use strict";(function(t){a("d3b7"),a("ac1f"),a("5319"),a("1276"),a("ddb0"),a("96cf");var s=a("1da1"),r=a("81b0"),o=a.n(r),i=a("bc3a"),n=a.n(i),l=a("c3bf"),c=a.n(l),u=a("db49");function d(t){var e=o.a.merge({},t.config.fetchs,JSON.parse(t.datas.fetchs));e.params.page=e.pages.page+e.pages.index,e.params.size=e.pages.size,n()(e).then((function(e){e&&e.data&&(t.result=t.format(e.data))})).catch((function(e){t.result=t.format(e)}))}e["a"]={name:"Views",props:[],data:function(){return{config:{},datas:{},result:"",view:""}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$route.query.config){e.next=15;break}return a={},e.prev=2,e.next=5,n.a.get(t.$route.query.config);case 5:a=e.sent,t.config=o.a.merge({},u["a"],a.data||{}),e.next=13;break;case 9:return e.prev=9,e.t0=e["catch"](2),alert("config "+t.$route.query.config+" load error\n"+e.t0.message+" "),e.abrupt("return");case 13:e.next=16;break;case 15:t.config=o.a.merge({},u["a"]);case 16:t.datas=o.a.merge({view:"",title:"",desc:"",fetchs:"{}",columns:"[]",filters:"[]",options:"{}"},t.$route.query),t.$route.query.options?t.datas.options=t.format(t.datas.options):t.datas.options=t.format({}),t.$route.query.fetchs?t.datas.fetchs=t.format(t.datas.fetchs):t.datas.fetchs=t.format({method:t.config.fetchs.method,url:t.config.fetchs.url}),t.$route.query.columns?t.datas.columns=t.format(t.datas.columns):t.datas.columns=t.format(o.a.keys(t.config.columns)),t.$route.query.filters?t.datas.filters=t.format(t.datas.filters):t.datas.filters=t.format(o.a.keys(t.config.filters));case 21:case"end":return e.stop()}}),e,null,[[2,9]])})))()},computed:{jq:function(){return t},fetch:function(){return o.a.debounce(d,500)}},methods:{fetchData:function(){return this.fetch(this)},buildData:function(){return o.a.merge({},this.datas,{fetchs:this.datas.fetchs?this.format(this.datas.fetchs):this.datas.fetchs,columns:this.datas.columns?this.format(this.datas.columns):this.datas.columns,filters:this.datas.filters?this.format(this.datas.filters):this.datas.filters,options:this.datas.options?this.format(this.datas.options):this.datas.options})},buildConfig:function(){this.result=this.format(this.buildData())},buildLink:function(){var t=this.buildData();this.$router.replace({path:"views",query:t}),this.view=c()("dataview/#/"+this.datas.view,{queryParams:t})},format:function(t){if(t)return"string"===typeof t&&(t=JSON.parse(t)),JSON.stringify(t,null,2)},textline:function(t){if(!t)return 1;var e=t.split("\n").length;return e||1},onFocus:function(t){this.jq(t).click()},onBlur:function(t){this.jq(t).click()}}}}).call(this,a("c5ec"))},5319:function(t,e,a){"use strict";var s=a("d784"),r=a("825a"),o=a("7b0b"),i=a("50c4"),n=a("a691"),l=a("1d80"),c=a("8aa5"),u=a("14c3"),d=Math.max,f=Math.min,p=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};s("replace",2,(function(t,e,a,s){var h=s.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,C=s.REPLACE_KEEPS_$0,w=h?"$":"$0";return[function(a,s){var r=l(this),o=void 0==a?void 0:a[t];return void 0!==o?o.call(a,r,s):e.call(String(r),a,s)},function(t,s){if(!h&&C||"string"===typeof s&&-1===s.indexOf(w)){var o=a(e,t,this,s);if(o.done)return o.value}var l=r(t),p=String(this),m="function"===typeof s;m||(s=String(s));var v=l.global;if(v){var x=l.unicode;l.lastIndex=0}var y=[];while(1){var _=u(l,p);if(null===_)break;if(y.push(_),!v)break;var P=String(_[0]);""===P&&(l.lastIndex=c(p,i(l.lastIndex),x))}for(var $="",q=0,k=0;k<y.length;k++){_=y[k];for(var S=String(_[0]),H=d(f(n(_.index),p.length),0),E=[],D=1;D<_.length;D++)E.push(g(_[D]));var N=_.groups;if(m){var B=[S].concat(E,H,p);void 0!==N&&B.push(N);var F=String(s.apply(void 0,B))}else F=b(S,p,H,E,N,s);H>=q&&($+=p.slice(q,H)+F,q=H+S.length)}return $+p.slice(q)}];function b(t,a,s,r,i,n){var l=s+t.length,c=r.length,u=v;return void 0!==i&&(i=o(i),u=m),e.call(n,u,(function(e,o){var n;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,s);case"'":return a.slice(l);case"<":n=i[o.slice(1,-1)];break;default:var u=+o;if(0===u)return e;if(u>c){var d=p(u/10);return 0===d?e:d<=c?void 0===r[d-1]?o.charAt(1):r[d-1]+o.charAt(1):e}n=r[u-1]}return void 0===n?"":n}))}}))},c3bf:function(t,e,a){(function(){"use strict";var a=this,s=a.buildUrl,r=function(t,e){var a,s,r,o=[];if(r=!(!e||!e.lowerCase)&&!!e.lowerCase,null===t?s="":"object"===typeof t?(s="",e=t):s=t,e){if(e.path){s&&"/"===s[s.length-1]&&(s=s.slice(0,-1));var i=String(e.path).trim();r&&(i=i.toLowerCase()),0===i.indexOf("/")?s+=i:s+="/"+i}if(e.queryParams){for(a in e.queryParams){var n;if(e.queryParams.hasOwnProperty(a)&&void 0!==e.queryParams[a])if(e.disableCSV&&Array.isArray(e.queryParams[a])&&e.queryParams[a].length)for(var l=0;l<e.queryParams[a].length;l++)n=encodeURIComponent(String(e.queryParams[a][l]).trim()),o.push(a+"="+n);else n=r?encodeURIComponent(String(e.queryParams[a]).trim().toLowerCase()):encodeURIComponent(String(e.queryParams[a]).trim()),o.push(a+"="+n)}s+="?"+o.join("&")}e.hash&&(s+=r?"#"+String(e.hash).trim().toLowerCase():"#"+String(e.hash).trim())}return s};r.noConflict=function(){return a.buildUrl=s,r},t.exports&&(e=t.exports=r),e.buildUrl=r}).call(this)},e5c2:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jumbotron"},[a("form",[a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.datas.view,expression:"datas.view"}],staticClass:"form-control font-weight-bolder",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.datas,"view",e.target.multiple?a:a[0])}}},t._l(t.config.views,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0),a("small",{staticClass:"form-text text-muted",attrs:{id:"viewHelp"}},[t._v("dataview type")])]),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.title,expression:"datas.title"}],staticClass:"col form-control font-weight-bolder",attrs:{rows:t.textline(t.datas.title),placeholder:"Title"},domProps:{value:t.datas.title},on:{focus:function(e){return t.onFocus("#titleHelp")},blur:function(e){return t.onBlur("#titleHelp")},input:function(e){e.target.composing||t.$set(t.datas,"title",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"titleHelp","data-toggle":"collapse","data-target":"#titleConfig"}},[t._v("dataview title")]),a("pre",{staticClass:"collapse",attrs:{id:"titleConfig"}},[a("code",[t._v(t._s(t.config.title))])])]),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.desc,expression:"datas.desc"}],staticClass:"col form-control font-weight-bolder",attrs:{rows:t.textline(t.datas.desc),placeholder:"Desc"},domProps:{value:t.datas.desc},on:{focus:function(e){return t.onFocus("#descHelp")},blur:function(e){return t.onBlur("#descHelp")},input:function(e){e.target.composing||t.$set(t.datas,"desc",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"descHelp","data-toggle":"collapse","data-target":"#descConfig"}},[t._v("dataview desc")]),a("pre",{staticClass:"collapse",attrs:{id:"descConfig"}},[a("code",[t._v(t._s(t.config.desc))])])]),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.fetchs,expression:"datas.fetchs"}],staticClass:"col form-control font-weight-bolder",attrs:{rows:t.textline(t.datas.fetchs),placeholder:"Fetch"},domProps:{value:t.datas.fetchs},on:{focus:function(e){return t.onFocus("#fetchHelp")},blur:function(e){return t.onBlur("#fetchHelp")},input:function(e){e.target.composing||t.$set(t.datas,"fetchs",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"fetchHelp","data-toggle":"collapse","data-target":"#fetchConfig"}},[t._v("dataview fetch")]),a("pre",{staticClass:"collapse",attrs:{id:"fetchConfig"}},[a("code",[t._v(t._s(t.format(t.config.fetchs)))])])]),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.columns,expression:"datas.columns"}],staticClass:"form-control font-weight-bolder",attrs:{rows:t.textline(t.datas.columns),placeholder:"Column"},domProps:{value:t.datas.columns},on:{focus:function(e){return t.onFocus("#columnHelp")},blur:function(e){return t.onBlur("#columnHelp")},input:function(e){e.target.composing||t.$set(t.datas,"columns",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"columnHelp","data-toggle":"collapse","data-target":"#columnConfig"}},[t._v("dataview column")]),a("pre",{staticClass:"collapse",attrs:{id:"columnConfig"}},[a("code",[t._v(t._s(t.format(t.config.columns)))])])]),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.filters,expression:"datas.filters"}],staticClass:"form-control font-weight-bolder",attrs:{rows:t.textline(t.datas.filters),placeholder:"Filter"},domProps:{value:t.datas.filters},on:{focus:function(e){return t.onFocus("#filterHelp")},blur:function(e){return t.onBlur("#filterHelp")},input:function(e){e.target.composing||t.$set(t.datas,"filters",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"filterHelp","data-toggle":"collapse","data-target":"#filterConfig"}},[t._v("dataview filter")]),a("pre",{staticClass:"collapse",attrs:{id:"filterConfig"}},[a("code",[t._v(t._s(t.format(t.config.filters)))])])]),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.options,expression:"datas.options"}],staticClass:"form-control font-weight-bolder",attrs:{rows:t.textline(t.datas.options),placeholder:"Options"},domProps:{value:t.datas.options},on:{focus:function(e){return t.onFocus("#optionHelp")},blur:function(e){return t.onBlur("#optionHelp")},input:function(e){e.target.composing||t.$set(t.datas,"options",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"optionHelp","data-toggle":"collapse","data-target":"#optionConfig"}},[t._v("dataview options")]),a("pre",{staticClass:"collapse",attrs:{id:"optionConfig"}},[a("code",[t._v(t._s(t.format(t.config.options)))])])]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-row justify-content-center"},[a("div",{staticClass:"col-auto"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.fetchData(e)}}},[t._v("Load Data")])]),a("div",{staticClass:"col-auto"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.buildConfig(e)}}},[t._v("Build Config")])]),a("div",{staticClass:"col-auto"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.buildLink(e)}}},[t._v("Build Link")])])])]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"text-break"},[a("router-link",{attrs:{to:{path:t.datas.view,query:t.$route.query}}},[t._v(t._s(t.view))])],1),a("pre",[t._v(t._s(t.result))])])])])},r=[],o=a("489e"),i=o["a"],n=a("2877"),l=Object(n["a"])(i,s,r,!1,null,"544d5d14",null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-78f4156a.5e13ac0ed8.js.map