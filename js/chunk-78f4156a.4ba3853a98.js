(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78f4156a"],{"489e":function(t,a,e){"use strict";(function(t){e("d3b7"),e("ac1f"),e("5319"),e("1276"),e("ddb0"),e("96cf");var s=e("1da1"),r=e("81b0"),o=e.n(r),i=e("bc3a"),n=e.n(i),l=e("c3bf"),c=e.n(l),d=e("db49");function u(t){var a=o.a.merge({},t.config.fetchs,JSON.parse(t.datas.fetchs));a.params.page=a.pages.page+a.pages.index,a.params.size=a.pages.size,n()(a).then((function(a){a&&a.data&&(t.result=t.format(a.data))})).catch((function(a){t.result=t.format(a)}))}a["a"]={name:"Views",props:[],data:function(){return{config:{},datas:{},result:"",view:""}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.$route.query.config){a.next=15;break}return e={},a.prev=2,a.next=5,n.a.get(t.$route.query.config);case 5:e=a.sent,t.config=o.a.merge({},d["a"],e.data||{}),a.next=13;break;case 9:return a.prev=9,a.t0=a["catch"](2),alert("config "+t.$route.query.config+" load error\n"+a.t0.message+" "),a.abrupt("return");case 13:a.next=16;break;case 15:t.config=o.a.merge({},d["a"]);case 16:t.datas=o.a.merge({view:"",title:"",desc:"",fetchs:"{}",columns:"[]",filters:"[]",options:"{}"},t.$route.query),t.$route.query.options?t.datas.options=t.format(t.datas.options):t.datas.options=t.format({}),t.$route.query.fetchs?t.datas.fetchs=t.format(t.datas.fetchs):t.datas.fetchs=t.format({method:t.config.fetchs.method,url:t.config.fetchs.url}),t.$route.query.columns?t.datas.columns=t.format(t.datas.columns):t.datas.columns=t.format(o.a.keys(t.config.columns)),t.$route.query.filters?t.datas.filters=t.format(t.datas.filters):t.datas.filters=t.format(o.a.keys(t.config.filters));case 21:case"end":return a.stop()}}),a,null,[[2,9]])})))()},computed:{jq:function(){return t},fetch:function(){return o.a.debounce(u,500)}},methods:{fetchData:function(){return this.fetch(this)},buildData:function(){return o.a.merge({},this.datas,{fetchs:this.datas.fetchs?this.format(this.datas.fetchs):this.datas.fetchs,columns:this.datas.columns?this.format(this.datas.columns):this.datas.columns,filters:this.datas.filters?this.format(this.datas.filters):this.datas.filters,options:this.datas.options?this.format(this.datas.options):this.datas.options})},buildConfig:function(){this.result=this.format(this.buildData())},buildLink:function(){var t=this.buildData();this.$router.replace({path:"views",query:t}),this.view=c()("dataview/#/"+this.datas.view,{queryParams:t})},format:function(t){if(t)return"string"===typeof t&&(t=JSON.parse(t)),JSON.stringify(t,null,2)},textline:function(t){if(!t)return 1;var a=t.split("\n").length;return a||1}}}}).call(this,e("c5ec"))},5319:function(t,a,e){"use strict";var s=e("d784"),r=e("825a"),o=e("7b0b"),i=e("50c4"),n=e("a691"),l=e("1d80"),c=e("8aa5"),d=e("14c3"),u=Math.max,f=Math.min,m=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};s("replace",2,(function(t,a,e,s){var h=s.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,C=s.REPLACE_KEEPS_$0,w=h?"$":"$0";return[function(e,s){var r=l(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,r,s):a.call(String(r),e,s)},function(t,s){if(!h&&C||"string"===typeof s&&-1===s.indexOf(w)){var o=e(a,t,this,s);if(o.done)return o.value}var l=r(t),m=String(this),p="function"===typeof s;p||(s=String(s));var v=l.global;if(v){var x=l.unicode;l.lastIndex=0}var y=[];while(1){var _=d(l,m);if(null===_)break;if(y.push(_),!v)break;var P=String(_[0]);""===P&&(l.lastIndex=c(m,i(l.lastIndex),x))}for(var $="",q=0,k=0;k<y.length;k++){_=y[k];for(var S=String(_[0]),E=u(f(n(_.index),m.length),0),D=[],N=1;N<_.length;N++)D.push(g(_[N]));var U=_.groups;if(p){var A=[S].concat(D,E,m);void 0!==U&&A.push(U);var L=String(s.apply(void 0,A))}else L=b(S,m,E,D,U,s);E>=q&&($+=m.slice(q,E)+L,q=E+S.length)}return $+m.slice(q)}];function b(t,e,s,r,i,n){var l=s+t.length,c=r.length,d=v;return void 0!==i&&(i=o(i),d=p),a.call(n,d,(function(a,o){var n;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,s);case"'":return e.slice(l);case"<":n=i[o.slice(1,-1)];break;default:var d=+o;if(0===d)return a;if(d>c){var u=m(d/10);return 0===u?a:u<=c?void 0===r[u-1]?o.charAt(1):r[u-1]+o.charAt(1):a}n=r[d-1]}return void 0===n?"":n}))}}))},c3bf:function(t,a,e){(function(){"use strict";var e=this,s=e.buildUrl,r=function(t,a){var e,s,r,o=[];if(r=!(!a||!a.lowerCase)&&!!a.lowerCase,null===t?s="":"object"===typeof t?(s="",a=t):s=t,a){if(a.path){s&&"/"===s[s.length-1]&&(s=s.slice(0,-1));var i=String(a.path).trim();r&&(i=i.toLowerCase()),0===i.indexOf("/")?s+=i:s+="/"+i}if(a.queryParams){for(e in a.queryParams){var n;if(a.queryParams.hasOwnProperty(e)&&void 0!==a.queryParams[e])if(a.disableCSV&&Array.isArray(a.queryParams[e])&&a.queryParams[e].length)for(var l=0;l<a.queryParams[e].length;l++)n=encodeURIComponent(String(a.queryParams[e][l]).trim()),o.push(e+"="+n);else n=r?encodeURIComponent(String(a.queryParams[e]).trim().toLowerCase()):encodeURIComponent(String(a.queryParams[e]).trim()),o.push(e+"="+n)}s+="?"+o.join("&")}a.hash&&(s+=r?"#"+String(a.hash).trim().toLowerCase():"#"+String(a.hash).trim())}return s};r.noConflict=function(){return e.buildUrl=s,r},t.exports&&(a=t.exports=r),a.buildUrl=r}).call(this)},e5c2:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"jumbotron"},[e("form",[e("div",{staticClass:"form-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.datas.view,expression:"datas.view"}],staticClass:"form-control font-weight-bolder",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.datas,"view",a.target.multiple?e:e[0])}}},t._l(t.config.views,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(" "+t._s(a)+" ")])})),0),e("small",{staticClass:"form-text text-muted",attrs:{id:"viewHelp"}},[t._v("dataview type")])]),e("div",{staticClass:"form-group"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.title,expression:"datas.title"}],staticClass:"col form-control font-weight-bolder",attrs:{rows:t.textline(t.datas.title),placeholder:"Title","data-toggle":"collapse","data-target":"#titleConfig"},domProps:{value:t.datas.title},on:{input:function(a){a.target.composing||t.$set(t.datas,"title",a.target.value)}}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"viewHelp"}},[t._v("dataview desc")]),e("pre",{staticClass:"collapse",attrs:{id:"descConfig"}},[e("code",[t._v(t._s(t.config.title))])])]),e("div",{staticClass:"form-group"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.desc,expression:"datas.desc"}],staticClass:"col form-control font-weight-bolder",attrs:{rows:t.textline(t.datas.desc),placeholder:"Desc","data-toggle":"collapse","data-target":"#descConfig"},domProps:{value:t.datas.desc},on:{input:function(a){a.target.composing||t.$set(t.datas,"desc",a.target.value)}}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"viewHelp"}},[t._v("dataview desc")]),e("pre",{staticClass:"collapse",attrs:{id:"descConfig"}},[e("code",[t._v(t._s(t.config.desc))])])]),e("div",{staticClass:"form-group"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.fetchs,expression:"datas.fetchs"}],staticClass:"col form-control font-weight-bolder",attrs:{rows:t.textline(t.datas.fetchs),placeholder:"Fetch","data-toggle":"collapse","data-target":"#fetchConfig"},domProps:{value:t.datas.fetchs},on:{input:function(a){a.target.composing||t.$set(t.datas,"fetchs",a.target.value)}}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"viewHelp"}},[t._v("data fetch")]),e("pre",{staticClass:"collapse",attrs:{id:"fetchConfig"}},[e("code",[t._v(t._s(t.format(t.config.fetchs)))])])]),e("div",{staticClass:"form-group"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.columns,expression:"datas.columns"}],staticClass:"form-control font-weight-bolder",attrs:{id:"columns",rows:t.textline(t.datas.columns),placeholder:"Column","data-toggle":"collapse","data-target":"#columnConfig"},domProps:{value:t.datas.columns},on:{input:function(a){a.target.composing||t.$set(t.datas,"columns",a.target.value)}}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"viewHelp"}},[t._v("data column")]),e("pre",{staticClass:"collapse",attrs:{id:"columnConfig"}},[e("code",[t._v(t._s(t.format(t.config.columns)))])])]),e("div",{staticClass:"form-group"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.filters,expression:"datas.filters"}],staticClass:"form-control font-weight-bolder",attrs:{id:"filter",rows:t.textline(t.datas.filters),placeholder:"Filter","data-toggle":"collapse","data-target":"#filterConfig"},domProps:{value:t.datas.filters},on:{input:function(a){a.target.composing||t.$set(t.datas,"filters",a.target.value)}}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"viewHelp"}},[t._v("data filter")]),e("pre",{staticClass:"collapse",attrs:{id:"filterConfig"}},[e("code",[t._v(t._s(t.format(t.config.filters)))])])]),e("div",{staticClass:"form-group"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.options,expression:"datas.options"}],staticClass:"form-control font-weight-bolder",attrs:{id:"filter",rows:t.textline(t.datas.options),placeholder:"Options","data-toggle":"collapse","data-target":"#optionsConfig"},domProps:{value:t.datas.options},on:{input:function(a){a.target.composing||t.$set(t.datas,"options",a.target.value)}}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"viewHelp"}},[t._v("data options")]),e("pre",{staticClass:"collapse",attrs:{id:"optionsConfig"}},[e("code",[t._v(t._s(t.format(t.config.options)))])])]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-row justify-content-center"},[e("div",{staticClass:"col-auto"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.fetchData(a)}}},[t._v("Load Data")])]),e("div",{staticClass:"col-auto"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.buildConfig(a)}}},[t._v("Build Config")])]),e("div",{staticClass:"col-auto"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.buildLink(a)}}},[t._v("Build Link")])])])]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"text-break"},[e("router-link",{attrs:{to:{path:t.datas.view,query:t.$route.query}}},[t._v(t._s(t.view))])],1),e("pre",[t._v(t._s(t.result))])])])])},r=[],o=e("489e"),i=o["a"],n=e("2877"),l=Object(n["a"])(i,s,r,!1,null,"25e27848",null);a["default"]=l.exports}}]);
//# sourceMappingURL=chunk-78f4156a.4ba3853a98.js.map